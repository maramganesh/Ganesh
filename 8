#include <bits/stdc++.h>
using namespace std;

vector<string> ln, outp;
int n;

bool isBlk(string &s){
    if(s.find("for ")==0) return 1;
    if(s.find("while ")==0) return 1;
    if(s.find("if ")==0) return 1;
    if(s=="else:") return 1;
    return 0;
}

string trim(string s){
    while(s.size() && (s.back()==' '||s.back()=='\n'||s.back()=='\r')) s.pop_back();
    while(s.size() && s[0]==' ') s.erase(s.begin());
    return s;
}

vector<string> splitCode(string s){
    vector<string> r;
    string cur="";
    for(int i=0;i<s.size();i++){
        if(s[i]==';'){
            if(cur.size()) r.push_back(trim(cur));
            cur="";
        }
        else cur+=s[i];
    }
    if(cur.size()) r.push_back(trim(cur));
    return r;
}

bool sim(vector<int> &ind){
    map<string,int> mp;
    vector<string> o;
    int i=0;
    stack<int> st;

    function<void(int)> go=[&](int lvl){
        while(i<n){
            if(ind[i]<lvl) return;
            if(ind[i]>lvl) return;
            string s=ln[i];
            i++;

            if(s.find("=")!=string::npos && s.find("==")==string::npos){
                int p=s.find("=");
                string a=s.substr(0,p);
                string b=s.substr(p+1);
                if(b=="True") mp[a]=1;
                else if(b=="False") mp[a]=0;
                else if(isdigit(b[0])) mp[a]=stoi(b);
                else mp[a]=mp[b];
            }
            else if(s.find("print")!=string::npos){
                int p=s.find("(");
                int q=s.rfind(")");
                string x=s.substr(p+1,q-p-1);
                if(x[0]=='"'||x[0]=='\''){
                    x=x.substr(1,x.size()-2);
                    o.push_back(x);
                }
                else o.push_back(to_string(mp[x]));
            }
            else if(s.find("while ")==0){
                int p=s.find("while ")+6;
                int q=s.find(":");
                string c=s.substr(p,q-p);
                int pos=c.find(">");
                string a=c.substr(0,pos);
                int v=stoi(c.substr(pos+1));
                int save=i;
                while(mp[a]>v){
                    int t=i;
                    go(lvl+1);
                    i=save;
                }
                while(i<n && ind[i]>lvl) i++;
            }
            else if(s.find("for ")==0){
                int p=s.find("range(");
                int q=s.find(")");
                string t=s.substr(p+6,q-p-6);
                int a,b;
                if(t.find(",")!=string::npos){
                    int c=t.find(",");
                    a=stoi(t.substr(0,c));
                    b=stoi(t.substr(c+1));
                }else{
                    a=0;
                    b=stoi(t);
                }
                string var=s.substr(4,s.find(" in")-4);
                int save=i;
                for(int k=a;k<b;k++){
                    mp[var]=k;
                    int t2=i;
                    go(lvl+1);
                    i=save;
                }
                while(i<n && ind[i]>lvl) i++;
            }
            else if(s.find("if ")==0){
                int p=s.find("if ")+3;
                int q=s.find(":");
                string c=s.substr(p,q-p);
                bool ok=0;
                if(c.find("%")!=string::npos){
                    int a=mp[c.substr(0,c.find("%"))];
                    int b=stoi(c.substr(c.find("%")+1,c.find("==")-c.find("%")-1));
                    int d=stoi(c.substr(c.find("==")+2));
                    if(a%b==d) ok=1;
                }
                else if(c.find("==")!=string::npos){
                    string a=c.substr(0,c.find("=="));
                    string b=c.substr(c.find("==")+2);
                    if(isdigit(b[0])) ok=(mp[a]==stoi(b));
                    else ok=(mp[a]==mp[b]);
                }
                int save=i;
                if(ok) go(lvl+1);
                else{
                    while(i<n && ind[i]>lvl) i++;
                }
            }
        }
    };

    go(0);
    return o==outp;
}

bool dfs(int idx, vector<int> &ind){
    if(idx==n) return sim(ind);
    for(int k=0;k<=n;k++){
        ind[idx]=k;
        if(idx>0 && ind[idx]>ind[idx-1]+1) continue;
        if(dfs(idx+1,ind)) return 1;
    }
    return 0;
}

int main(){
    ios::sync_with_stdio(0);
    cin.tie(0);

    string s,tmp;
    getline(cin,s);

    ln=splitCode(s);
    n=ln.size();

    while(getline(cin,tmp)){
        if(tmp.size()) outp.push_back(trim(tmp));
    }

    vector<int> ind(n,0);
    if(dfs(0,ind)){
        for(int i=0;i<n;i++){
            for(int j=0;j<ind[i]*4;j++) cout<<" ";
            cout<<ln[i]<<"\n";
        }
    }
    else cout<<"Not possible";

    return 0;
}
